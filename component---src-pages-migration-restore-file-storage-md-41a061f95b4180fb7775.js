"use strict";(self.webpackChunkacd_containers=self.webpackChunkacd_containers||[]).push([[2290],{3624:function(e,t,a){a.d(t,{Z:function(){return v}});var n=a(7294),r=a(8650),i=a.n(r),o=a(1597),s=a(3383),l=a(2157),c=a(5900),m=a.n(c),p=function(e){var t,a=e.title,r=e.theme,i=e.tabs,o=void 0===i?[]:i;return n.createElement("div",{className:m()("PageHeader-module--page-header--NqfPe",(t={},t["PageHeader-module--with-tabs--vbQ-W"]=o.length,t["PageHeader-module--dark-mode--WCeH8"]="dark"===r,t))},n.createElement("div",{className:"bx--grid"},n.createElement("div",{className:"bx--row"},n.createElement("div",{className:"bx--col-lg-12"},n.createElement("h1",{id:"page-title",className:"PageHeader-module--text--Er2EO"},a)))))},d=function(e){var t=e.relativePagePath,a=e.repository,r=(0,o.useStaticQuery)("1364590287").site.siteMetadata.repository,i=a||r,s=i.baseUrl,l=i.subDirectory,c=s+"/edit/"+i.branch+l+"/src/pages"+t;return s?n.createElement("div",{className:"bx--row EditLink-module--row--BEmSX"},n.createElement("div",{className:"bx--col"},n.createElement("a",{className:"EditLink-module--link--IDrl1",href:c},"Edit this page on GitHub"))):null},u=a(4703),g=a(1721),h=function(e){function t(){return e.apply(this,arguments)||this}return(0,g.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.title,a=e.tabs,r=e.slug,s=r.split("/").filter(Boolean).slice(-1)[0],l=a.map((function(e){var t,a=i()(e,{lower:!0,strict:!0}),l=a===s,c=new RegExp(s+"/?(#.*)?$"),p=r.replace(c,a);return n.createElement("li",{key:e,className:m()((t={},t["PageTabs-module--selected-item--aBB0K"]=l,t),"PageTabs-module--list-item--024o6")},n.createElement(o.Link,{className:"PageTabs-module--link--Kz-7R",to:""+p},e))}));return n.createElement("div",{className:"PageTabs-module--tabs-container--Cdfzw"},n.createElement("div",{className:"bx--grid"},n.createElement("div",{className:"bx--row"},n.createElement("div",{className:"bx--col-lg-12 bx--col-no-gutter"},n.createElement("nav",{"aria-label":t},n.createElement("ul",{className:"PageTabs-module--list--xLqxG"},l))))))},t}(n.Component),k=h,f=a(7296),N=a(5387),C=a(3732),b=function(e){var t=e.date,a=new Date(t);return t?n.createElement(C.X2,{className:"last-modified-date-module--row--XJoYQ"},n.createElement(C.sg,null,n.createElement("div",{className:"last-modified-date-module--text--ogPQF"},"Page last updated: ",a.toLocaleDateString("en-GB",{day:"2-digit",year:"numeric",month:"long"})))):null},v=function(e){var t=e.pageContext,a=e.children,r=e.location,c=e.Title,m=t.frontmatter,g=void 0===m?{}:m,h=t.relativePagePath,C=t.titleType,v=g.tabs,y=g.title,w=g.theme,_=g.description,E=g.keywords,x=g.date,A=(0,N.Z)().interiorTheme,D=(0,o.useStaticQuery)("2456312558").site.pathPrefix,P=D?r.pathname.replace(D,""):r.pathname,M=v?P.split("/").filter(Boolean).slice(-1)[0]||i()(v[0],{lower:!0}):"",R=w||A;return n.createElement(l.Z,{tabs:v,homepage:!1,theme:R,pageTitle:y,pageDescription:_,pageKeywords:E,titleType:C},n.createElement(p,{title:c?n.createElement(c,null):y,label:"label",tabs:v,theme:R}),v&&n.createElement(k,{title:y,slug:P,tabs:v,currentTab:M}),n.createElement(f.Z,{padded:!0},a,n.createElement(d,{relativePagePath:h}),n.createElement(b,{date:x})),n.createElement(u.Z,{pageContext:t,location:r,slug:P,tabs:v,currentTab:M}),n.createElement(s.Z,null))}},2549:function(e,t,a){a.r(t),a.d(t,{_frontmatter:function(){return s},default:function(){return m}});var n=a(3366),r=(a(7294),a(4983)),i=a(3624),o=["components"],s={},l={_frontmatter:s},c=i.Z;function m(e){var t=e.components,a=(0,n.Z)(e,o);return(0,r.kt)(c,Object.assign({},l,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"The Merative Annotator for Clinical Data Container Edition is the replacement for the IBM Watson Annotator for Clinical Data Container Edition. All Annotator for Clinical Data (ACD) Container Edition consumers need to migrate their ACD instances from IBM Watson ACD to Merative ACD by March 31, 2023."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"For more information and general considerations, see ",(0,r.kt)("a",{parentName:"p",href:"/acd-containers/migration/considerations/"},"Migration Considerations"),".")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Additional storage migration options include:"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/acd-containers/migration/redeploy-file-storage/"},"Cartridge Redeployment with Shared File Storage")," to recreate the data by redeploying your cartridges to a new shared file storage volume."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/acd-containers/migration/migrate-file-storage/"},"Migration of Existing Shared File Storage")," to migrate the data using the same shared file storage volume."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/acd-containers/migration/migrate-object-storage/"},"Migration of Existing Object Storage")," to migrate the data using the same object storage bucket.")))),(0,r.kt)("p",null,"Plan to do the following when restoring from a backup to new storage as a migration path for an ACD instance that uses shared file storage as a storage medium."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Backup the existing persistent storage."),(0,r.kt)("li",{parentName:"ul"},"Create a new namespace for ACD."),(0,r.kt)("li",{parentName:"ul"},"Create a new storage volume and claim."),(0,r.kt)("li",{parentName:"ul"},"Restore from the backup to the new volume."),(0,r.kt)("li",{parentName:"ul"},"Create an ACD instance in the new namespace and configure it to use the new storage."),(0,r.kt)("li",{parentName:"ul"},"Start up the new ACD instance and verify operation, including any persistent data."),(0,r.kt)("li",{parentName:"ul"},"Enable access to the new instance and verify."),(0,r.kt)("li",{parentName:"ul"},"Remove the old instance at a later date.")),(0,r.kt)("p",null,"A set of detailed steps are provided below as an option for migration."),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Note:")," References to source ACD or source namespace are referring to your existing IBM ACD instance and namespace. References to target ACD or target namespace are referring to a new Merative ACD instance and namespace."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Take a backup of the persistent storage in the source namespace. Follow your usual backup process, or run this command as an example of a direct command to do the backup (",(0,r.kt)("inlineCode",{parentName:"p"},"exec")," in, tar to shared file system, and then copy out.)"),(0,r.kt)("p",{parentName:"li"},"Replace ",(0,r.kt)("inlineCode",{parentName:"p"},"<backup_file_name>")," with the name you want to use as your backup file name."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"export source_acd_pod_name=$(oc get pods -n ${source_acd_namespace} | grep acd-acd | awk '{print $1}')\noc exec ${source_acd_pod_name} -n ${source_acd_namespace} -- tar -I \"gzip --best\" -cf - /opt/ibm/watsonhealth/services/config/artifactstore/tenant_data > <backup_file_name>.tar.gz\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Create the target ACD namespace and switch to that namespace as your project."),(0,r.kt)("p",{parentName:"li"},"Replace ",(0,r.kt)("inlineCode",{parentName:"p"},"<target_ACD_namespace>")," with the name you want to use as your new ACD namespace."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"export target_acd_namespace=<target_ACD_namespace>\noc create namespace ${target_acd_namespace}\noc project ${target_acd_namespace}\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Create a new PersistentVolumeClaim (PVC) and PersistentVolume (PV) in the target namespace. Create a PVC using the OpenShift console, or save the example yaml below as <target_pvc_name>.yaml. Replace ",(0,r.kt)("inlineCode",{parentName:"p"},"<target_pvc_name>")," with the new PVC name. Ensure the rest of the configuration matches that of your existing PVC in the source ACD namespace. It should show a status of ",(0,r.kt)("inlineCode",{parentName:"p"},"Bound"),"."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"apiVersion: v1\nkind: PersistentVolumeClaim\nmetadata:\n  name: <target_pvc_name>\nspec:\n  accessModes:\n  - ReadWriteMany\n  resources:\n    requests:\n      storage: 10Gi\n  storageClassName: ocs-storagecluster-cephfs\n  volumeMode: Filesystem\n")),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"export target_pvc_name=<target_pvc_name>\noc create -f <target_pvc_name>.yaml -n ${target_acd_namespace}\noc get pvc -n ${target_acd_namespace}\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Restore the most recent backup to the new volume using your usual ",(0,r.kt)("a",{parentName:"p",href:"/acd-containers/management/backup-and-recovery/"},"Backup and Recovery")," process.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Create a new ACD instance in the target namespace using the target PVC name."),(0,r.kt)("p",{parentName:"li"},"Also bring forward the rest of your configured settings from the existing source deployment, such as tenant header, license usage, etc."),(0,r.kt)("p",{parentName:"li"},"Refer to ",(0,r.kt)("a",{parentName:"p",href:"/acd-containers/installing/installing/"},"Installing ACD")," for installation steps.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Verify all ACD pods start up as expected."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"oc get pods -n ${target_acd_namespace}\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Make OAuth proxy updates for secure access to the target namespace, if configured to use this."),(0,r.kt)("p",{parentName:"li"},"For ACD deployments (not the Configuration Editor), create a serviceview role in target namespace and grant all service accounts in the proxy namespace access to it. Follow the steps 7 and 8 under ",(0,r.kt)("a",{parentName:"p",href:"/acd-containers/security/manage-access/"},"Manage Access"),"."),(0,r.kt)("p",{parentName:"li"},"Update the proxy deployment upstream option to point to the ACD service (or cartridge service) in the target namespace. Follow step 2 under ",(0,r.kt)("a",{parentName:"p",href:"/acd-containers/security/manage-access/"},"Manage Access"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Uninstall the source ACD instance and source ACD operator at a later date."),(0,r.kt)("p",{parentName:"li"},"Refer to ",(0,r.kt)("a",{parentName:"p",href:"https://merative.github.io/acd-containers/installing/uninstalling/"},"Uninstalling ACD")," for instructions."))))}m.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-migration-restore-file-storage-md-41a061f95b4180fb7775.js.map